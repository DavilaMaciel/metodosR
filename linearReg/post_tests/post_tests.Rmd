---
title       : "Pós-Testes"
subtitle    : "Análise de dados com modelos lineares em R"
author      : "Nicholas A. C. Marino"
job         : "Universidade Federal do Rio de Janeiro"
date        : "github.com/nacmarino/metodosR"
output:
  ioslides_presentation:
    widescreen: true
    smaller: true
---

## Pós-testes  

* Normalmente estamos interessados em determinar a diferença entre níveis de uma categoria, ou como uma relação muda de acordo com os níveis de uma categoria.  

* Para estes casos, normalmente utilizamos pós-testes, __após__ determinar a significância de cada termo no modelo.  
  
* Pós-teste tende a fazer sentido quando o termo no modelo é significativo.  

* __Pós-teste é baseado nas nossas hipóteses originais de trabalho!__

## Pós-testes | Comparações múltiplas  

* As comparações à serem feitas dependem da hipótese que queremos testar:  
    + O valor de __x__ é maior que o valor de __y__;
    + O valor de __x__ é menor que o valor de __y__;
    + O valor de __x__ é igual ao valor de __y__;
    + O grupo de categorias __a__ (x~1~, x~2~,..., x~n~) tem valores diferentes do grupo de categorias __b__ (y~1~, y~2~,..., y~n~);  
    + __x__ e __y__ são perfeitamente relacionados;  
    + Os valores do tratamento __x__ são maiores do que os do tratamento __y__ e tratamento __z__;     + E muito mais...
* Estas comparações tendem a envolver múltiplos teste estatísticos - corrigir os valores de $\alpha$ ou não?  

## Pós-testes  

* O pacote `lsmeans` possui muitas funções úteis para realizarmos quase todo o tipo de pós-teste que normalmente pensamos.

```{r warning=FALSE, message=FALSE}
library(lsmeans)
library(car)
ilhas <- read.table(file = "../model_selection/dados/ilhas.txt", header = TRUE)
modelo1 <- glm(log10(riqueza) ~ log10(area) * ilha + arquipelago, data = ilhas)
Anova(modelo1, type = "III", test.statistic = "F")
```

## Pós-testes  

* Qual a diferença na riqueza de espécies de acordo com o tamanho do arquipélago?

```{r}
(teste1 <- lsmeans(object = modelo1, "arquipelago"))
contrast(teste1, method = "pairwise") # Tukey; para não ajustar os valores de p: adjust = "none"
```

## Pós-testes  

* Qual a diferença na riqueza de espécies de acordo com o tipo de ilha?

```{r}
(lsmeans(object = modelo1, pairwise ~ ilha))
```

## Pós-testes  

* Qual a diferença na riqueza de espécies de acordo com a área e o tipo de ilha?

```{r}
teste <- lstrends(modelo1, pairwise ~ ilha | area)
```
